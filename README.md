# 07173 çƒ­æœçˆ¬è™«ç³»ç»Ÿ

åŸºäº 07173.com çƒ­æœæ¦œçš„è‡ªåŠ¨åŒ–çˆ¬è™«ç³»ç»Ÿï¼Œæ”¯æŒå¤šå¹³å°çƒ­æœæ•°æ®æŠ“å–å’Œå®šæ—¶è¿è¡Œã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- âœ… æ”¯æŒ17ä¸ªä¸»æµå¹³å°çƒ­æœæ•°æ®æŠ“å–
- â° æ¯å°æ—¶è‡ªåŠ¨è¿è¡Œï¼ˆå¯è‡ªå®šä¹‰é—´éš”ï¼‰
- ğŸ’¾ æ•°æ®æŒä¹…åŒ–å­˜å‚¨ï¼ˆJSONæ ¼å¼ï¼‰
- ğŸ“Š å®Œæ•´çš„æ—¥å¿—è®°å½•
- ğŸ”„ å¤±è´¥é‡è¯•æœºåˆ¶
- ğŸ›¡ï¸ ä¼˜é›…çš„é”™è¯¯å¤„ç†å’Œä¿¡å·å¤„ç†

## æ”¯æŒçš„å¹³å°

- å“”å“©å“”å“©ã€æŠ–éŸ³ã€å¾®åšã€çŸ¥ä¹ã€ç™¾åº¦
- å°‘æ•°æ´¾ã€ITä¹‹å®¶ã€æ¾æ¹ƒæ–°é—»ã€ä»Šæ—¥å¤´æ¡ã€36æ°ª
- ç¨€åœŸæ˜é‡‘ã€è…¾è®¯æ–°é—»ã€ç½‘æ˜“æ–°é—»
- è‹±é›„è”ç›Ÿã€åŸç¥ã€å¾®ä¿¡è¯»ä¹¦ã€è´´å§

## é¡¹ç›®ç»“æ„

```
çƒ­ç‚¹çˆ¬å–/
â”œâ”€â”€ crawler.py          # çˆ¬è™«æ ¸å¿ƒæ¨¡å—
â”œâ”€â”€ scheduler.py        # å®šæ—¶è°ƒåº¦å™¨
â”œâ”€â”€ config.json         # é…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements.txt    # Pythonä¾èµ–
â”œâ”€â”€ run.sh             # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ README.md          # æœ¬æ–‡æ¡£
â”œâ”€â”€ data/              # æ•°æ®å­˜å‚¨ç›®å½•
â”‚   â”œâ”€â”€ latest.json    # æœ€æ–°æ•°æ®
â”‚   â””â”€â”€ hotsearch_*.json  # å†å²æ•°æ®
â””â”€â”€ logs/              # æ—¥å¿—ç›®å½•
    â””â”€â”€ crawler_*.log  # æŒ‰æœˆåˆ†å‰²çš„æ—¥å¿—
```

## å¿«é€Ÿå¼€å§‹

### æœ¬åœ°ä½¿ç”¨

#### 1. å®‰è£…ä¾èµ–

```bash
pip3 install -r requirements.txt
```

æˆ–è€…æ‰‹åŠ¨å®‰è£…ï¼š
```bash
pip3 install requests schedule
```

#### 2. è¿è¡Œæ–¹å¼

#### æ–¹å¼ä¸€ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
./run.sh
```

#### æ–¹å¼äºŒï¼šå•æ¬¡è¿è¡Œ

```bash
# è¿è¡Œä¸€æ¬¡çˆ¬è™«
python3 crawler.py

# æˆ–ä½¿ç”¨è°ƒåº¦å™¨çš„å•æ¬¡æ¨¡å¼
python3 scheduler.py --once
```

#### æ–¹å¼ä¸‰ï¼šå®šæ—¶è¿è¡Œ

```bash
# æ¯å°æ—¶è¿è¡Œä¸€æ¬¡ï¼ˆé»˜è®¤ï¼‰
python3 scheduler.py

# è‡ªå®šä¹‰é—´éš”ï¼ˆä¾‹å¦‚æ¯2å°æ—¶ï¼‰
python3 scheduler.py --interval 2
```

### Ubuntu æœåŠ¡å™¨éƒ¨ç½² ğŸš€

#### å¿«é€Ÿéƒ¨ç½²ï¼ˆ3åˆ†é’Ÿï¼‰

**1. ä¸Šä¼ é¡¹ç›®åˆ°æœåŠ¡å™¨**

```bash
# åœ¨æœ¬åœ°æ‰§è¡Œ
rsync -avz --exclude 'data/*' --exclude 'logs/*' \
  "/path/to/çƒ­ç‚¹çˆ¬å–/" user@your-server:/home/user/hotsearch/
```

**2. SSHç™»å½•å¹¶ä¸€é”®éƒ¨ç½²**

```bash
# ç™»å½•æœåŠ¡å™¨
ssh user@your-server

# è¿›å…¥ç›®å½•
cd hotsearch

# ä¸€é”®éƒ¨ç½²ï¼ˆè‡ªåŠ¨å®‰è£…ä¾èµ–ã€åˆ›å»ºsystemdæœåŠ¡ã€å¯åŠ¨è¿è¡Œï¼‰
sudo bash deploy.sh
```

**3. éªŒè¯è¿è¡Œ**

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
./manage.sh status

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
./manage.sh logs

# æŸ¥çœ‹æ•°æ®
./manage.sh data
```

#### æœåŠ¡ç®¡ç†

```bash
./manage.sh status      # æŸ¥çœ‹çŠ¶æ€
./manage.sh start       # å¯åŠ¨æœåŠ¡
./manage.sh stop        # åœæ­¢æœåŠ¡
./manage.sh restart     # é‡å¯æœåŠ¡
./manage.sh logs        # æŸ¥çœ‹å®æ—¶æ—¥å¿—
./manage.sh data        # æŸ¥çœ‹æ•°æ®æ‘˜è¦
./manage.sh clean       # æ¸…ç†æ—§æ•°æ®
./manage.sh test        # æµ‹è¯•è¿è¡Œ
./manage.sh uninstall   # å¸è½½æœåŠ¡
```

#### è¯¦ç»†æ–‡æ¡£

- [Ubuntuå¿«é€Ÿéƒ¨ç½²æŒ‡å—](SERVER_QUICKSTART.md) - 3åˆ†é’Ÿå¿«é€Ÿéƒ¨ç½²
- [Ubuntuå®Œæ•´éƒ¨ç½²æ–‡æ¡£](DEPLOY_UBUNTU.md) - è¯¦ç»†éƒ¨ç½²è¯´æ˜

## æ•°æ®æ ¼å¼

### æœ€æ–°æ•°æ®æ–‡ä»¶ï¼š`data/latest.json`

```json
{
  "crawl_time": "2025-10-23T17:30:00",
  "platforms": {
    "å“”å“©å“”å“©": {
      "platform": "å“”å“©å“”å“©",
      "timestamp": "2025-10-23T17:30:01",
      "data": [
        {
          "title": "çƒ­æœæ ‡é¢˜",
          "url": "https://...",
          "hot": "çƒ­åº¦å€¼"
        }
      ]
    }
  }
}
```

### å†å²æ•°æ®ï¼š`data/hotsearch_YYYYMMDD_HHMMSS.json`

æ¯æ¬¡è¿è¡Œéƒ½ä¼šä¿å­˜ä¸€ä»½å¸¦æ—¶é—´æˆ³çš„å†å²è®°å½•ã€‚

## é…ç½®è¯´æ˜

ç¼–è¾‘ `config.json` å¯ä»¥è‡ªå®šä¹‰é…ç½®ï¼š

```json
{
  "crawler": {
    "data_dir": "data",        // æ•°æ®ç›®å½•
    "log_dir": "logs",         // æ—¥å¿—ç›®å½•
    "platforms": [...]         // è¦çˆ¬å–çš„å¹³å°åˆ—è¡¨
  },
  "scheduler": {
    "interval_hours": 1,       // è¿è¡Œé—´éš”ï¼ˆå°æ—¶ï¼‰
    "run_on_startup": true,    // å¯åŠ¨æ—¶ç«‹å³è¿è¡Œ
    "save_history": true       // æ˜¯å¦ä¿å­˜å†å²è®°å½•
  },
  "request": {
    "timeout": 10,             // è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
    "retry": 3,                // å¤±è´¥é‡è¯•æ¬¡æ•°
    "delay_between_requests": 1 // è¯·æ±‚é—´éš”ï¼ˆç§’ï¼‰
  }
}
```

## æ—¥å¿—è¯´æ˜

æ—¥å¿—æ–‡ä»¶ä¿å­˜åœ¨ `logs/` ç›®å½•ï¼ŒæŒ‰æœˆåˆ†å‰²ï¼š
- æ–‡ä»¶åæ ¼å¼ï¼š`crawler_YYYYMM.log`
- æ—¥å¿—çº§åˆ«ï¼šINFOï¼ˆåŒ…å«æ‰€æœ‰æ“ä½œè®°å½•ï¼‰
- åŒæ—¶è¾“å‡ºåˆ°æ§åˆ¶å°å’Œæ–‡ä»¶

## åœæ­¢è¿è¡Œ

æŒ‰ `Ctrl+C` å¯ä»¥ä¼˜é›…åœ°åœæ­¢ç¨‹åºã€‚

## åå°è¿è¡Œ

### ä½¿ç”¨ nohupï¼ˆLinux/macOSï¼‰

```bash
nohup python3 scheduler.py > output.log 2>&1 &
```

### ä½¿ç”¨ screenï¼ˆLinux/macOSï¼‰

```bash
screen -S hotsearch
python3 scheduler.py
# æŒ‰ Ctrl+A ç„¶åæŒ‰ D åˆ†ç¦»ä¼šè¯
# æ¢å¤ä¼šè¯ï¼šscreen -r hotsearch
```

### ä½¿ç”¨ systemdï¼ˆLinuxï¼‰

åˆ›å»ºæœåŠ¡æ–‡ä»¶ `/etc/systemd/system/hotsearch.service`ï¼š

```ini
[Unit]
Description=07173 Hot Search Crawler
After=network.target

[Service]
Type=simple
User=your_username
WorkingDirectory=/path/to/çƒ­ç‚¹çˆ¬å–
ExecStart=/usr/bin/python3 scheduler.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

å¯åŠ¨æœåŠ¡ï¼š
```bash
sudo systemctl enable hotsearch
sudo systemctl start hotsearch
sudo systemctl status hotsearch
```

## API è¯´æ˜

æœ¬çˆ¬è™«ä½¿ç”¨ç¬¬ä¸‰æ–¹APIï¼š
- æ¥å£ï¼š`https://api.pearktrue.cn/api/dailyhot/`
- å‚æ•°ï¼š`?title=å¹³å°åç§°`
- è¿”å›ï¼šJSONæ ¼å¼æ•°æ®

## æ³¨æ„äº‹é¡¹

1. è¯·éµå®ˆAPIä½¿ç”¨è§„èŒƒï¼Œä¸è¦è¿‡äºé¢‘ç¹è¯·æ±‚
2. å»ºè®®é—´éš”æ—¶é—´ä¸å°‘äº30åˆ†é’Ÿ
3. æ•°æ®ä»…ä¾›å­¦ä¹ å’Œä¸ªäººä½¿ç”¨
4. å®šæœŸæ¸…ç†å†å²æ•°æ®æ–‡ä»¶ä»¥èŠ‚çœç©ºé—´

## æ•…éšœæ’æŸ¥

### é—®é¢˜ï¼šè¯·æ±‚å¤±è´¥æˆ–è¶…æ—¶
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- ç¡®è®¤APIæœåŠ¡æ˜¯å¦æ­£å¸¸
- å¢åŠ é‡è¯•æ¬¡æ•°æˆ–è¶…æ—¶æ—¶é—´

### é—®é¢˜ï¼šæ•°æ®æ ¼å¼é”™è¯¯
- æ£€æŸ¥APIè¿”å›æ ¼å¼æ˜¯å¦å˜åŒ–
- æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯

### é—®é¢˜ï¼šæƒé™é”™è¯¯
- ç¡®ä¿å¯¹ `data/` å’Œ `logs/` ç›®å½•æœ‰å†™å…¥æƒé™
- Linux/macOS ç”¨æˆ·å¯èƒ½éœ€è¦ `chmod +x run.sh`

## å¼€å‘è€…ä¿¡æ¯

- Pythonç‰ˆæœ¬è¦æ±‚ï¼š3.7+
- ä¸»è¦ä¾èµ–ï¼šrequests, schedule
- ç¼–ç ï¼šUTF-8

## è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ã€‚

## æ›´æ–°æ—¥å¿—

### v1.1.0 (2025-10-23)
- ğŸš€ æ–°å¢UbuntuæœåŠ¡å™¨ä¸€é”®éƒ¨ç½²æ–¹æ¡ˆ
- ğŸ® æ–°å¢æœåŠ¡ç®¡ç†å·¥å…·ï¼ˆmanage.shï¼‰
- ğŸ”§ æ–°å¢systemdæœåŠ¡æ”¯æŒ
- ğŸ“– æ–°å¢å®Œæ•´éƒ¨ç½²æ–‡æ¡£

### v1.0.0 (2025-10-23)
- âœ¨ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ… æ”¯æŒ16ä¸ªå¹³å°çƒ­æœçˆ¬å–
- â° å®ç°å®šæ—¶è°ƒåº¦åŠŸèƒ½
- ğŸ’¾ æ•°æ®æŒä¹…åŒ–å­˜å‚¨
- ğŸ“Š å®Œæ•´æ—¥å¿—ç³»ç»Ÿ
